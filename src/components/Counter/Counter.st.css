:import {
    -st-from: "../../common/formatters.st";
    -st-named: applyUnit, color, fallback, font, value, applyOpacity;
}

:import {
    -st-from: "../../common/palette.st.css";
    -st-named: errorColor;
}

:import {
  -st-from: "../IconButton/IconButton.st.css";
  -st-default: TPAIconButton;
}


:vars {
    /*Defaults*/
    DefaultColor: color-5;
    DefaultDisabledColor: color-3;
    DefaultErrorColor: value(errorColor);
    DefaultBackgroundColor: color-1;
    DefaultWidth: 104px;
}

:vars {
    /*Overrides*/
    MainColor: --overridable;
    DisabledColor: --overridable;
    MainWidth: --overridable;
}

:vars {
    counterColor: color(fallback(value(MainColor), value(DefaultColor)));
    counterDisabledColor: color(fallback(value(DisabledColor), value(DefaultDisabledColor)));
    counterWidth: fallback(value(MainWidth), value(DefaultWidth));
}

.root {
    -st-states: error, disabled;
    display: inline-flex;
    flex-flow: row-reverse;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box;
    width: value(counterWidth);
    height: 40px;
    padding: 0 6px;
    background: color(value(DefaultBackgroundColor));
    border-width: 1px;
    border-style: solid;
    border-color: applyOpacity(value(counterColor), 0.6);
}

.root:error {
    border-color: value(DefaultErrorColor);
}

.root:hover:not(:disabled):not(:error),
.root:focus:not(:disabled):not(:error){
    border-color: value(counterColor);
}

.root:disabled {
    border-color: color(value(counterDisabledColor));
}

.btn {
    -st-extends: TPAIconButton;
    -st-mixin: TPAIconButton(
        IconColor color(value(counterColor))
    );
    background: none;
    padding: 6px;
    border: none;
    cursor: pointer;
}

.root .btn:skin(full):disabled::icon path {
    fill: color(value(counterDisabledColor));
    stroke: none;
}

.root .btn:skin(full):not(:disabled)::icon path {
    stroke: none;
}

.root .btn:skin(full):not(:disabled):hover::icon path {
    stroke: none;
}

.root .btn:skin(full):disabled:hover::icon path {
    fill: color(value(counterDisabledColor));
    stroke: none;
}

.root:disabled .btn {
    color: color(value(counterDisabledColor));
}

.root:error svg {
    color: value(DefaultErrorColor);
}

.root .inputWrapper {
    flex-grow: 1;
}

.root input {
    background: color(value(DefaultBackgroundColor));
    padding: 0;
    border: none;
    text-align: center;
    width: 100%;
    color: value(counterColor);
    font: font("{theme: 'Body-M', size: '16px', lineHeight: '1.5em'}");
}

.root:disabled input {
    color: color(value(counterDisabledColor));
}



/* Removing browser-specific default buttons inside input element */
.root input::-webkit-outer-spin-button,
.root input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.root input[type=number] {
    -moz-appearance: textfield;
}

.root input::-ms-clear {
    display: none;
}







